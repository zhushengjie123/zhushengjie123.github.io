(window.webpackJsonp=window.webpackJsonp||[]).push([[289],{619:function(s,n,a){"use strict";a.r(n);var t=a(3),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"全局事件总线"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局事件总线"}},[s._v("#")]),s._v(" 全局事件总线")]),s._v(" "),n("h2",{attrs:{id:"作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[s._v("#")]),s._v(" 作用")]),s._v(" "),n("p",[s._v("通过自定义事件添加到某一个公共对象上，以其为枢纽，来实现任意组件之间的通讯")]),s._v(" "),n("h2",{attrs:{id:"实现原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现原理"}},[s._v("#")]),s._v(" 实现原理")]),s._v(" "),n("h3",{attrs:{id:"_1-其必须能让所有组件获取到"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-其必须能让所有组件获取到"}},[s._v("#")]),s._v(" 1.其必须能让所有组件获取到")]),s._v(" "),n("p",[s._v("方法：\n(1)添加到VC的原型上\n（由于实际并没有总构造函数VueComonent这样一个概念，因为只有创建了一个组件以后才会创建出一个全新的VC，要添加只能在该组件里通过隐式原型来添加，比较麻烦，不推荐）。\n"),n("strong",[s._v("(2)顺着VC原型再往上找添加到Vue的原型上（推荐）")])]),s._v(" "),n("h3",{attrs:{id:"_2-能够添加绑定事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-能够添加绑定事件"}},[s._v("#")]),s._v(" 2.能够添加绑定事件")]),s._v(" "),n("p",[s._v("因为v-on这些修饰符和指令是存在于Vue原型对象上的，要想使用就必须是vm或VC\n(1)通过创建一个新vc来实现")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const vc=Vue.extend({})\nconst transVc=new vc()\nVue.prototype.$bus=transVc//因此所有组件上都有$bus(为了语义化而取此名，也可以取其他的名)，且为一个VC实例对象\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("(2)通过已有的vm实例来实现(推荐)")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('//Vue.prototype.x=vm//无法在前面添加因为vm还未创建\nconst vm = new Vue({\n el:"#app",\n render: h => h(App),\n beforeCreate(){//利用生命周期函数在创建vm后就立即添加\n Vue.prototype.$bus=this\n  }\n})\nVue.prototype.x=transVc//也无法在后面加因为加晚了，此时页面已经挂载完毕\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"运用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运用"}},[s._v("#")]),s._v(" 运用")]),s._v(" "),n("p",[s._v("组件一(绑定自定义事件并，接收数据)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('mounted() {\n this.$bus.$on("hello", (getit) => {\n console.log("组件一已收到", getit);\n    });\n  }\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("组件二(发送数据)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n <div>\n <button @click="send">点我发送数据给组件一</button>\n </div>\n</template>\n<script>\nexport default {\n name: "City",\n data() {\n return {\n cityName: "北京",\n    };\n  },\n methods: {\n send(){\n this.$bus.$emit(\'hello\',this.cityName)\n    }\n  }\n};\n<\/script>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);